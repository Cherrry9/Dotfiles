#!/usr/bin/env sh
list="$HOME/.cache/files.list"
find "$HOME/Dotfiles/config" -type f > "$list"
while read -r file; do
	if [ -f "$file" ]; then
		case $file in
		*/.zgen/* | */.config/dmenu/* | */bundle/* | */wallpaper) ;;
		*)
			if [ -n "$options" ]; then
				options="$options\n${file#$HOME/Dotfiles/config/}"
			else
				options="${file#$HOME/Dotfiles/config/}"
			fi
			;;
		esac
	fi
done <"$list"
rm "$list"
choice=$(printf '%b\n' "$options" | dmenu -i -p 'Edit a config file') || exit 1
choice="$HOME"/Dotfiles/config/"$choice"
$TERMINAL -e zsh -c "sleep 0.05 && nvim $choice"
