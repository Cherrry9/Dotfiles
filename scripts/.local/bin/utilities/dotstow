#!/usr/bin/env sh
cd ~/dotfiles || exit
list="$HOME/.cache/dir.list"
find . -maxdepth 1 -type d >"$list"
while read -r line; do
	line="${line#./}"
	case $line in
	.git | tabbed | dmenu | figlet | previews | .) ;;
	*)
		if [ "$1" = "-f" ]; then
			stow --no-folding --adopt -Sv "$line"
		else
			stow --no-folding -Sv "$line"
		fi
		;;
	esac
done <"$list"
rm "$list"
[ "$1" = "-f" ] && git reset --hard
